<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Catch the siaguare(Fixed)</title>
<style>
:root{--bg:#17191a;--ui:#212426;--fg:#e8eef1;--good:#34d058;--bad:#ff4d4f;--accent:#5aa9ff}
*{box-sizing:border-box;user-select:none}body{margin:0;background:var(--bg);color:var(--fg);font:600 14px/1.3 system-ui,Segoe UI,Roboto,Arial}
#W{max-width:900px;margin:12px auto;padding:0 12px}#H{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin:6px 0 10px}
.P{background:var(--ui);padding:6px 10px;border-radius:999px;border:1px solid #2a2e32}button{background:#1e6bff;color:#fff;border:none;border-radius:8px;padding:8px 12px;font-weight:700;cursor:pointer}
button.S{background:var(--ui);color:var(--fg);border:1px solid #2a2e32}
#B{position:relative;height:min(560px,70vh);background:#0e1011;border:2px solid #2a2e32;border-radius:12px;overflow:hidden}
.Q{position:absolute;width:40px;height:40px;border-radius:8px}#P{background:var(--accent)}#T{background:var(--good)}.H{background:var(--bad)}
#O{position:absolute;inset:0;display:none;place-items:center;background:rgba(0,0,0,.55)}#C{background:#1b1f22;border:1px solid #2a2e32;border-radius:14px;padding:18px;min-width:260px;text-align:center}
#Pad{display:none;position:absolute;left:10px;bottom:10px;gap:6px}.R{display:flex;gap:6px;justify-content:center}.K{width:50px;height:50px;display:grid;place-items:center;background:#222;border:1px solid #2a2e32;border-radius:10px}
@media(max-width:900px){#Pad{display:flex;flex-direction:column}}
</style></head><body>
<div id="W">
  <div id="H">
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <span class="P">Score: <b id="sc">0</b></span>
      <span class="P">Level: <b id="lv">1</b></span>
      <span class="P">Lives: <b id="li">3</b></span>
      <span class="P">Time: <b id="tm">60</b>s</span>
    </div>
    <div style="display:flex;gap:6px">
      <button id="pBtn" class="S">‚è∏ Pause</button><button id="rBtn">üîÅ Restart</button>
    </div>
  </div>

  <div id="B">
    <div id="P" class="Q"></div><div id="T" class="Q"></div>
    <div id="Pad"><div class="R"><div class="K" data-d="up">‚ñ≤</div></div><div class="R"><div class="K" data-d="left">‚óÄ</div><div class="K" data-d="down">‚ñº</div><div class="K" data-d="right">‚ñ∂</div></div></div>
    <div id="O"><div id="C"><h2 id="oh" style="margin:4px 0">Paused</h2><p id="om" style="opacity:.9;margin:4px 0 10px"></p>
      <div style="display:flex;gap:6px;justify-content:center"><button id="go">Play</button><button id="re" class="S">Restart</button></div>
    </div></div>
  </div>

  <p style="opacity:.75;margin:8px 2px">WASD/Arrows or pad. Catch üü©, dodge üî¥. Timer to win. Level-ups add/speed hazards.</p>
</div>

<script>
(()=>{const B=el('B'),P=el('P'),T=el('T'),scE=el('sc'),lvE=el('lv'),liE=el('li'),tmE=el('tm'),
pBtn=el('pBtn'),rBtn=el('rBtn'),O=el('O'),oh=el('oh'),om=el('om'),go=el('go'),re=el('re');
const S={w:0,h:0,s:40,px:100,py:100,tx:300,ty:300,H:[],score:0,lv:1,life:3,time:60,v:180,keys:new Set(),run:true,last:performance.now()};
const AC=new (window.AudioContext||window.webkitAudioContext)();const beep=(f=750,d=.07,v=.06)=>{try{AC.resume()}catch{}const o=AC.createOscillator(),g=AC.createGain();o.type='square';o.frequency.value=f;g.gain.value=v;o.connect(g);g.connect(AC.destination);o.start();setTimeout(()=>o.stop(),d*1000)};
const map={ArrowUp:'up',ArrowDown:'down',ArrowLeft:'left',ArrowRight:'right',w:'up',s:'down',a:'left',d:'right'};

window.addEventListener('keydown',e=>{if(map[e.key])S.keys.add(map[e.key]);if(e.key==='Escape')toggle()});
window.addEventListener('keyup',e=>{if(map[e.key])S.keys.delete(map[e.key])});
qsAll('.K').forEach(b=>{const d=b.dataset.d;['pointerdown','pointerup','pointerleave','pointercancel'].forEach(ev=>b.addEventListener(ev,ev.includes('down')?()=>S.keys.add(d):()=>S.keys.delete(d)))});
pBtn.onclick=toggle;rBtn.onclick=reset;go.onclick=()=>{O.style.display='none';reset()};re.onclick=reset;window.addEventListener('resize',layout);

function el(id){return document.getElementById(id)}function qsAll(s){return document.querySelectorAll(s)}
const clamp=(v,a,b)=>Math.max(a,Math.min(b,v)),rnd=(a,b)=>Math.random()*(b-a)+a,box=(x,y)=>`translate(${x}px,${y}px)`;
const place=()=>({x:rnd(8,S.w-S.s-8),y:rnd(8,S.h-S.s-8)}),hit=(ax,ay,as,bx,by,bs)=>ax<bx+bs&&ax+as>bx&&ay<by+bs&&ay+as>by;
function hazard(m=1){const e=document.createElement('div');e.className='Q H';B.appendChild(e);const p=place(),vx=(Math.random()<.5?-1:1)*rnd(90,140)*m,vy=(Math.random()<.5?-1:1)*rnd(90,140)*m;return{e,x:p.x,y:p.y,vx,vy,s:S.s}}
function hud(){scE.textContent=S.score;lvE.textContent=S.lv;liE.textContent=S.life;tmE.textContent=Math.max(0,Math.ceil(S.time))}
function layout(){const r=B.getBoundingClientRect();S.w=r.width;S.h=r.height;P.style.transform=box(S.px,S.py);T.style.transform=box(S.tx,S.ty);S.H.forEach(h=>h.e.style.transform=box(h.x,h.y))}
function pause(t='Paused',m=''){S.run=false;pBtn.textContent='‚ñ∂ Resume';oh.textContent=t;om.textContent=m;O.style.display='grid'}
function run(){S.run=true;pBtn.textContent='‚è∏ Pause';O.style.display='none'}
function toggle(){S.run?pause():run()}
function win(){S.run=false;beep(880,.08);beep(1180,.08);pause('You Win!',`Score ${S.score} ‚Ä¢ Level ${S.lv}`)}
function lose(){S.run=false;beep(180,.12);pause('Game Over',`Score ${S.score} ‚Ä¢ Level ${S.lv}`)}
function reset(){S.H.forEach(h=>h.e.remove());S.H.length=0;Object.assign(S,{score:0,lv:1,life:3,time:60,px:100,py:100});const p=place();S.tx=p.x;S.ty=p.y;for(let i=0;i<3;i++)S.H.push(hazard(1));hud();layout();run();beep(800,.05)}
function step(now){
  if(!S.run){S.last=now;return requestAnimationFrame(step)}
  const dt=Math.min(.033,(now-S.last)/1000);S.last=now;S.time-=dt;if(S.time<=0)return win();
  let dx=0,dy=0;S.keys.has('up')&&dy--;S.keys.has('down')&&dy++;S.keys.has('left')&&dx--;S.keys.has('right')&&dx++;
  if(dx||dy){const L=Math.hypot(dx,dy)||1;S.px+=S.v*(dx/L)*dt;S.py+=S.v*(dy/L)*dt}S.px=clamp(S.px,0,S.w-S.s);S.py=clamp(S.py,0,S.h-S.s);
  S.H.forEach(h=>{h.x+=h.vx*dt;h.y+=h.vy*dt;if(h.x<0||h.x>S.w-h.s)h.vx*=-1,h.x=clamp(h.x,0,S.w-h.s);if(h.y<0||h.y>S.h-h.s)h.vy*=-1,h.y=clamp(h.y,0,S.h-h.s)});
  if(hit(S.px,S.py,S.s,S.tx,S.ty,S.s)){S.score+=10;beep(950,.06);const p=place();S.tx=p.x;S.ty=p.y;const n=Math.floor(S.score/30)+1;if(n>S.lv){S.lv=n;S.H.push(hazard(1+.15*(S.lv-1)));S.H.forEach(h=>{h.vx*=1.05;h.vy*=1.05});S.time=Math.min(120,S.time+5)}} 
  for(const h of S.H){if(hit(S.px,S.py,S.s,h.x,h.y,h.s)){S.life--;beep(220,.08);S.px=10;S.py=10;if(S.life<=0)return lose();break}}
  hud();layout();requestAnimationFrame(step)
}
layout();reset();requestAnimationFrame(step);
})();
</script>
</body></html>
